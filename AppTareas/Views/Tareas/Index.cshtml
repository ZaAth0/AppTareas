@model IEnumerable<AppTareas.Models.Tarea>

@{
    ViewData["Title"] = "Lista de Tareas";
 }
 @section  Estilos {
    @*ESTILOS DE DATA TABLES*@
    <link href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css" rel="stylesheet" />

    @*ESTILOS DE BOTONES*@
    <link href="https://cdn.datatables.net/buttons/2.2.2/css/buttons.dataTables.min.css" rel="stylesheet" />

    @*filter columns*@
    <link href="https://cdn.datatables.net/fixedheader/3.2.2/css/fixedHeader.dataTables.min.css" rel="stylesheet" />
 }
    <h1>Listado de tareas</h1>
    <p><a asp-action="Crear" class="btn btn-outline-info">Crear nueva tarea</a></p>

<table class="table" id="tb_tareas">
    <thead>
    <tr>
    <th>Id</th>
    <th>Titulo</th>
    <th>Descripcion</th>
    <th>Esta Completado</th>
    <th></th>
    </tr>
    </thead>
    <tbody>

            @foreach (var item in Model)
            {
                <tr>
                <td>@item.Id</td>
                <td>@item.Titulo</td>
                <td>@item.Descripcion</td>
                <td><input type="checkbox" @(item.EstaCompletado ? "checked" : "") disabled /></td>
                <td>
                    @Html.ActionLink("Detalle", "Detalle", new { id = item.Id },
                    new
                    {
                              @class = "btn btn-info",
                              id = "btnDetalle" + item.Id, //Id unico de cada enlace
                              data_toggle = "modal", //Atributo para activar el modal enn Bootstra
                              data_target= "#confirmModal",//ID del modal a mostrar
                              data_url = Url.Action("Detalle", new {id = item.Id}),
                              data_message = "¿Estás seguro de que deseas ver el detalle de este item?"
                    }

                    )
                    @Html.ActionLink("Editar", "Editar", new { id = item.Id },
                   
                        new {
                            @class = "btn btn-secondary",
                            id = "eliminar-link"+item.Id,
                            title = "Editar Tarea",
                            data_toggle = "Accion para eliminar registro",
                            onclick = "return confirmarAccion()"
                             }
                             )
                             
                              @Html.ActionLink("Eliminar", "Eliminar", new { id = item.Id },
                              new{
                                 @class = "btn btn-danger",
                             id = "eliminar-link",
                             title = "Eliminar Tarea",
                             data_toggle = "Accion para eliminar registro",
                                 onclick = "return confirm('¿Estas seguro de continuar?');"
                             }
                             )
                </td>
                </tr>
            }

    </tbody>
    </table>
    @section Scripts{
<script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
@*SCRIPTS DE BOTONES*@
<script src="https://cdn.datatables.net/buttons/2.2.2/js/dataTables.buttons.min.js"></script>
@*excel*@
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.2.2/js/buttons.html5.min.js"></script>
@*pdf*@
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
@*imprimir*@
<script src="https://cdn.datatables.net/buttons/2.2.2/js/buttons.print.min.js"></script>
@*filter columns*@
<script src="https://cdn.datatables.net/fixedheader/3.2.2/js/dataTables.fixedHeader.min.js"></script>
    
<script type="text/javascript"> 
    $(document).ready(function () {
        $('#tb_tareas').DataTable({
            //PRIMERO
            language: {
                url: " https://cdn.datatables.net/plug-ins/1.11.5/i18n/es-ES.json"
            },
            //SEGUNDO 
            columnDefs: [
                {
                    targets: 0, //Indice de la columna que deseas ocultar
                    visible: false
                }],
            //TERCERO
            dom: 'Bfrtip',
            buttoms: [
                //'excel'
                {
                    extend: 'excelHtml5',
                    text: 'Exportar Excel',
                    filename: 'Reporte Tareas',
                    title: '',
                    exportOptions: {
                        columns: [1, 2]
                    },
                    className: 'btn-exportar-excel'
                },
                //pdf
                {
                    extend: 'pdfHtml5',
                    text: 'Exportar PDF',
                    filename: 'Reporte Tareas',
                    title: '',
                    exportOptions: {
                        columns: [1, 2]
                    },
                    className: 'btn-exportar-pdf'
                },
                //print
                {
                    extend: 'print',
                    title: '',
                    exportOptions: {
                        columns: [1, 2]
                    },
                    className: 'btn-exportar-print'
                },
                //extra
                'pageLength'
            ],
            fixedHeader: true
        });
    });
   // alert("Mensaje desde JAVASCRIPT");
    function confirmarAccion(){
        var mensaje = "¿Estás seguro de que deseas continuar?"
        return confirm(mensaje);
    }  
    </script>
}
 